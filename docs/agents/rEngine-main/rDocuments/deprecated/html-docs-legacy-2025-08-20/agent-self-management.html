<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Self-Management Protocol</title>
    <style>
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; font-weight: 300; }
        .header .subtitle { font-size: 1.2em; opacity: 0.9; }
        .content { padding: 40px; }
        .doc-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .doc-card {
            background: white;
            border: 1px solid #e1e4e8;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }
        .doc-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .doc-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        .doc-icon { font-size: 2em; }
        .doc-title { font-size: 1.2em; font-weight: 600; color: #2c3e50; }
        .doc-category { 
            background: #f8f9fa; 
            padding: 4px 8px; 
            border-radius: 4px; 
            font-size: 0.8em; 
            color: #495057; 
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #007acc;
        }
        .stat-number { font-size: 2em; font-weight: bold; color: #007acc; }
        .stat-label { color: #6c757d; margin-top: 5px; }
        .footer {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
            margin-top: 40px;
        }
        .footer h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
            font-weight: 300;
        }
        .footer p {
            opacity: 0.9;
            margin-bottom: 10px;
        }
        .footer .version {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
            margin-top: 15px;
        }
    
/* 
 * rEngine Documentation System - Unified Branding Theme
 * Generated by rScribe Document System
 * Version: 2.1.0
 * Last Updated: August 19, 2025
 */

:root {
    /* Primary Brand Colors */
    --rengine-primary: #667eea;
    --rengine-secondary: #764ba2;
    --rengine-accent: #495057;
    --rengine-accent-light: #6c757d;
    
    /* Status Colors */
    --status-success: #28a745;
    --status-warning: #ffc107;
    --status-danger: #dc3545;
    --status-info: #007acc;
    
    /* Neutral Colors */
    --text-primary: #333;
    --text-secondary: #666;
    --text-muted: #888;
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --border-color: #e1e4e8;
    
    /* Shadows and Effects */
    --shadow-light: 0 2px 4px rgba(0,0,0,0.1);
    --shadow-medium: 0 8px 16px rgba(0,0,0,0.1);
    --shadow-heavy: 0 20px 40px rgba(0,0,0,0.1);
    
    /* Typography */
    --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    --font-size-base: 16px;
    --line-height-base: 1.6;
}

/* Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family);
    line-height: var(--line-height-base);
    color: var(--text-primary);
    background: linear-gradient(135deg, var(--rengine-primary) 0%, var(--rengine-secondary) 100%);
    min-height: 100vh;
    padding: 20px;
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    background: var(--bg-primary);
    border-radius: 15px;
    box-shadow: var(--shadow-heavy);
    overflow: hidden;
}

/* Header */
.header {
    background: linear-gradient(135deg, var(--rengine-accent) 0%, var(--rengine-accent-light) 100%);
    color: white;
    padding: 30px;
    text-align: center;
}

.header-icon {
    font-size: 3em;
    margin-bottom: 15px;
    opacity: 0.9;
}

.header h1 {
    font-size: 2.2em;
    margin-bottom: 10px;
    font-weight: 300;
}

.header .subtitle {
    font-size: 1.1em;
    opacity: 0.8;
    margin-bottom: 5px;
}

.header .meta {
    font-size: 0.9em;
    opacity: 0.7;
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
}

/* Navigation */
.nav-bar {
    background: var(--bg-secondary);
    padding: 15px 30px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.nav-links {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.nav-link {
    padding: 8px 16px;
    background: var(--status-info);
    color: white;
    text-decoration: none;
    border-radius: 6px;
    font-size: 0.9em;
    font-weight: 500;
    transition: all 0.3s ease;
}

.nav-link:hover {
    background: #0056b3;
    transform: translateY(-2px);
}

/* Content */
.content {
    padding: 40px;
    max-width: none;
}

/* Status Indicators */
.status-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8em;
    font-weight: 600;
    text-transform: uppercase;
}

.status-success { background: var(--status-success); color: white; }
.status-warning { background: var(--status-warning); color: #000; }
.status-danger { background: var(--status-danger); color: white; }
.status-info { background: var(--status-info); color: white; }

/* Footer - Standardized rEngine Branding */
.footer {
    background: var(--bg-secondary);
    padding: 20px 30px;
    border-top: 1px solid var(--border-color);
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.9em;
}

.footer .branding {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}

.footer .system-name {
    font-weight: 600;
    color: var(--rengine-accent);
}

.footer .version {
    color: var(--text-muted);
    font-style: italic;
}

.footer .divider {
    color: var(--text-muted);
    opacity: 0.5;
}

/* Responsive Design */
@media (max-width: 768px) {
    body {
        padding: 10px;
    }
    
    .container {
        border-radius: 10px;
    }
    
    .header {
        padding: 20px;
    }
    
    .header h1 {
        font-size: 1.8em;
    }
    
    .content {
        padding: 20px;
    }
    
    .nav-bar {
        padding: 10px 20px;
    }
    
    .footer .branding {
        flex-direction: column;
        gap: 5px;
    }
}

/* Typography Enhancements */
h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
    margin-bottom: 0.5em;
}

h1 { font-size: 2.5em; font-weight: 300; }
h2 { font-size: 2em; font-weight: 400; }
h3 { font-size: 1.5em; font-weight: 500; }
h4 { font-size: 1.25em; font-weight: 500; }
h5 { font-size: 1.1em; font-weight: 600; }
h6 { font-size: 1em; font-weight: 600; }

/* Code and Pre blocks */
code {
    background: var(--bg-secondary);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Monaco', 'Consolas', monospace;
    font-size: 0.9em;
}

pre {
    background: var(--bg-secondary);
    padding: 15px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 15px 0;
    border-left: 4px solid var(--rengine-primary);
}

/* Lists */
ul, ol {
    padding-left: 20px;
    margin: 15px 0;
}

li {
    margin: 5px 0;
}

/* Links */
a {
    color: var(--status-info);
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
}

th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

th {
    background: var(--bg-secondary);
    font-weight: 600;
}

/* Blockquotes */
blockquote {
    border-left: 4px solid var(--rengine-primary);
    padding-left: 20px;
    margin: 20px 0;
    font-style: italic;
    color: var(--text-secondary);
}


        /* Sidebar Navigation Styles */
        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            min-height: 90vh;
        }
        
        .nav-sidebar {
            width: 300px;
            background: linear-gradient(145deg, #f8f9fa 0%, #e9ecef 100%);
            border-right: 1px solid #e1e4e8;
            overflow-y: auto;
            flex-shrink: 0;
        }
        
        .nav-header {
            padding: 20px;
            border-bottom: 1px solid #e1e4e8;
            background: linear-gradient(145deg, #495057 0%, #6c757d 100%);
            color: white;
        }
        
        .nav-header h1 {
            font-size: 1.2em;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .nav-subtitle {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .nav-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .nav-menu > li {
            border-bottom: 1px solid #e1e4e8;
        }
        
        .nav-menu > li > a {
            display: block;
            padding: 12px 20px;
            color: #495057;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .nav-menu > li > a:hover {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-left-color: #007acc;
        }
        
        .nav-submenu {
            list-style: none;
            padding: 0;
            margin: 0;
            background: #ffffff;
        }
        
        .nav-submenu li a {
            display: block;
            padding: 8px 20px 8px 40px;
            color: #6c757d;
            text-decoration: none;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }
        
        .nav-submenu li a:hover {
            background: #f8f9fa;
            color: #007acc;
            padding-left: 45px;
        }
        
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
        }
        
        .main-content h1, .main-content h2, .main-content h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .main-content h1 { 
            font-size: 2.2em; 
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 25px;
        }
        
        .main-content h2 { 
            font-size: 1.6em; 
            margin-top: 30px;
            color: #495057;
        }
        
        .main-content h3 { 
            font-size: 1.3em; 
            margin-top: 25px;
            color: #6c757d;
        }
        
        .main-content p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .main-content ul, .main-content ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .main-content li {
            margin-bottom: 5px;
        }
        
        .main-content code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
        
        .main-content pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 15px;
        }
        
        .main-content blockquote {
            border-left: 4px solid #667eea;
            padding-left: 15px;
            margin: 15px 0;
            color: #6c757d;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .nav-sidebar {
                width: 100%;
                max-height: 300px;
            }
            
            .main-content {
                padding: 20px;
            }
        }
      
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation Sidebar -->
        <nav class="nav-sidebar">
            
      <div class="nav-header">
        <h1>Agent Self-Management Protocol</h1>
        <div class="nav-subtitle">Generated from Markdown</div>
      </div>
      
      <ul class="nav-menu">
    <li><a href="#purpose-overview">ðŸ“‹ Purpose & Overview</a><ul class="nav-submenu"></ul></li><li><a href="#technical-architecture">ðŸ“„ Technical Architecture</a><ul class="nav-submenu"></ul></li><li><a href="#dependencies">ðŸ“„ Dependencies</a><ul class="nav-submenu"></ul></li><li><a href="#key-functionsclasses">ðŸ“„ Key Functions/Classes</a><ul class="nav-submenu"><li><a href="#agentselfmanagement-class">`AgentSelfManagement` Class</a></li></ul></li><li><a href="#usage-examples">ðŸ“„ Usage Examples</a><ul class="nav-submenu"><li><a href="#startup-check">Startup Check</a></li><li><a href="#task-completion">Task Completion</a></li><li><a href="#session-cleanup">Session Cleanup</a></li></ul></li><li><a href="#configuration">ðŸ“„ Configuration</a><ul class="nav-submenu"></ul></li><li><a href="#error-handling">ðŸ“„ Error Handling</a><ul class="nav-submenu"></ul></li><li><a href="#integration">ðŸ“„ Integration</a><ul class="nav-submenu"></ul></li><li><a href="#development-notes">ðŸ“„ Development Notes</a><ul class="nav-submenu"></ul></li></ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <h1 id="agent-self-management-protocol">Agent Self-Management Protocol</h1>
<h2 id="purpose--overview">Purpose &amp; Overview</h2>
<p>The <code>agent-self-management.js</code> script is responsible for ensuring that agents follow memory contribution protocols and maintain the integrity of the system&#39;s memory and code repository. This script should be run by every agent at startup and task completion to perform the following key functions:</p>
<ol>
<li><strong>Startup Check</strong>: Verify the agent&#39;s memory state, check for recent tasks, load short-term memory, and check the Git repository status.</li>
<li><strong>Task Completion</strong>: Log task completion details, update short-term memory, and create incremental Git backups if necessary.</li>
<li><strong>Session Cleanup</strong>: Finalize the agent session, update short-term memory, and log the session summary to the extended context.</li>
</ol>
<p>By automating these self-management tasks, the script helps maintain the reliability and consistency of the agent&#39;s memory contributions and the overall system&#39;s codebase.</p>
<h2 id="technical-architecture">Technical Architecture</h2>
<p>The <code>AgentSelfManagement</code> class is the main component of this script, responsible for coordinating the various self-management tasks. Here&#39;s a breakdown of the key components and data flow:</p>
<ol>
<li><strong>Initialization</strong>: The constructor sets up the necessary file paths and session-specific metadata.</li>
<li><strong>Startup Check</strong>:<ul>
<li><code>checkRecentTasks()</code>: Loads the extended context to check for recent tasks and sessions.</li>
<li><code>loadShortTermMemory()</code>: Loads the short-term memory file, checking for any incomplete tasks from the previous session.</li>
<li><code>checkGitStatus()</code>: Checks the Git repository status and determines if a backup commit is needed.</li>
<li><code>initializeSession()</code>: Initializes the current agent session, logging the session details to the extended context.</li>
</ul>
</li>
<li><strong>Task Completion</strong>:<ul>
<li><code>logTaskCompletion()</code>: Logs the task completion details, updates the short-term memory, and creates a Git backup if necessary.</li>
<li><code>updateShortTermMemory()</code>: Updates the short-term memory file with the latest task completions, memory contributions, and Git backups.</li>
<li><code>considerGitBackup()</code>: Determines if a Git backup should be created based on the task completion details.</li>
</ul>
</li>
<li><strong>Session Cleanup</strong>:<ul>
<li><code>sessionCleanup()</code>: Updates the short-term memory with the final session status, logs the session summary to the extended context, and prints the session statistics.</li>
</ul>
</li>
</ol>
<p>The script uses various Node.js core modules, such as <code>fs/promises</code>, <code>path</code>, and <code>child_process</code>, to interact with the file system and execute Git commands.</p>
<h2 id="dependencies">Dependencies</h2>
<p>The script has the following dependencies:</p>
<ul>
<li><code>fs/promises</code>: For asynchronous file system operations.</li>
<li><code>path</code>: For working with file paths.</li>
<li><code>fileURLToPath</code>: For converting a file URL to a file path.</li>
<li><code>exec</code>: For executing shell commands (via <code>child_process</code>).</li>
<li><code>promisify</code>: For converting callback-based functions to Promises.</li>
</ul>
<h2 id="key-functionsclasses">Key Functions/Classes</h2>
<h3 id="agentselfmanagement-class"><code>AgentSelfManagement</code> Class</h3>
<p>This class is responsible for managing the agent&#39;s self-management tasks.</p>
<h4 id="constructor">Constructor</h4>
<ul>
<li><code>constructor()</code>: Initializes the necessary file paths and session-specific metadata.</li>
</ul>
<h4 id="startup-check-methods">Startup Check Methods</h4>
<ul>
<li><code>startupCheck()</code>: Performs the startup check, including recent task verification, short-term memory loading, and Git status check.</li>
<li><code>checkRecentTasks()</code>: Loads the extended context and retrieves the last 5 recent sessions.</li>
<li><code>loadShortTermMemory()</code>: Loads the short-term memory file and checks for any incomplete tasks from the previous session.</li>
<li><code>checkGitStatus()</code>: Checks the Git repository status and determines if a backup commit is needed.</li>
<li><code>initializeSession()</code>: Initializes the current agent session and logs the session details to the extended context.</li>
</ul>
<h4 id="task-completion-methods">Task Completion Methods</h4>
<ul>
<li><code>logTaskCompletion(taskDescription, outcome, filesModified)</code>: Logs the task completion details, updates the short-term memory, and creates a Git backup if necessary.</li>
<li><code>updateShortTermMemory()</code>: Updates the short-term memory file with the latest task completions, memory contributions, and Git backups.</li>
<li><code>considerGitBackup(completion)</code>: Determines if a Git backup should be created based on the task completion details.</li>
</ul>
<h4 id="session-cleanup-method">Session Cleanup Method</h4>
<ul>
<li><code>sessionCleanup()</code>: Updates the short-term memory with the final session status, logs the session summary to the extended context, and prints the session statistics.</li>
</ul>
<h2 id="usage-examples">Usage Examples</h2>
<h3 id="startup-check">Startup Check</h3>
<pre><code class="language-bash">node agent-self-management.js startup
</code></pre>
<p>This command will perform the startup check, verifying the agent&#39;s memory state, checking for recent tasks, loading short-term memory, and checking the Git repository status.</p>
<h3 id="task-completion">Task Completion</h3>
<pre><code class="language-bash">node agent-self-management.js task-complete &quot;Fetch and process data&quot; &quot;Completed&quot;
</code></pre>
<p>This command will log the task completion details, update the short-term memory, and create a Git backup if necessary.</p>
<h3 id="session-cleanup">Session Cleanup</h3>
<pre><code class="language-bash">node agent-self-management.js cleanup
</code></pre>
<p>This command will finalize the agent session, update the short-term memory, and log the session summary to the extended context.</p>
<h2 id="configuration">Configuration</h2>
<p>The script does not require any specific configuration options or environment variables. It uses the file paths and metadata defined in the <code>constructor()</code> method.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The script uses try-catch blocks to handle various errors that may occur during the self-management tasks. Errors are logged to the console with appropriate color-coded messages for better visibility.</p>
<h2 id="integration">Integration</h2>
<p>The <code>agent-self-management.js</code> script is a core component of the agent&#39;s lifecycle management, ensuring the consistency and reliability of the agent&#39;s memory contributions and the overall system&#39;s codebase. It should be integrated with the agent&#39;s startup and task completion routines to ensure proper self-management.</p>
<h2 id="development-notes">Development Notes</h2>
<ol>
<li><strong>Incremental Git Backups</strong>: The script creates incremental Git backups based on specific criteria, such as the number of modified files, the types of files changed, and the number of tasks completed. This helps maintain the integrity of the codebase and provides a way to track changes and revert if necessary.</li>
<li><strong>Short-Term Memory Management</strong>: The script manages the agent&#39;s short-term memory, which includes task completions, memory contributions, and Git backups. This information is used to track the agent&#39;s activities and support the overall system&#39;s memory management.</li>
<li><strong>Extended Context Integration</strong>: The script integrates with the extended context system, logging important events and session details. This helps provide a comprehensive view of the agent&#39;s activities and the system&#39;s overall state.</li>
<li><strong>Modular Design</strong>: The <code>AgentSelfManagement</code> class is designed to be modular and reusable, allowing for easy integration into the agent&#39;s lifecycle management and potential future extensions or customizations.</li>
</ol>

            
            <footer style="margin-top: 40px; padding: 20px 0; border-top: 1px solid #e1e4e8; text-align: center; color: #666;">
                <p><em>Generated: 8/19/2025</em></p>
                <p><em>Source: Markdown â†’ HTML via rScribe Worker</em></p>
            </footer>
        </main>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Highlight current section in navigation
        window.addEventListener('scroll', function() {
            let current = '';
            const sections = document.querySelectorAll('h2, h3');
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (pageYOffset >= sectionTop) {
                    current = section.id;
                }
            });

            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.style.background = '#e1f5fe';
                    link.style.color = '#007acc';
                    link.style.fontWeight = 'bold';
                } else {
                    link.style.background = '';
                    link.style.color = '';
                    link.style.fontWeight = '';
                }
            });
        });
    </script>
</body>
</html>