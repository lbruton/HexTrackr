/**
 * @fileoverview Prototype-specific styles for tickets2 page
 * @description Styles for AG-Grid implementation and prototype elements
 * @version 1.0.0
 */

/* Beta Banner Styling */
.alert-info .alert-title {
    font-weight: 600;
    margin-bottom: 0.25rem;
}

/* AG-Grid Container - matches Bootstrap table behavior */
#ticketsAgGrid {
    width: 100%;
    height: auto; /* Let domLayout: 'autoHeight' control this */
    min-height: 400px;
    max-height: 800px;
    border: 1px solid var(--bs-border-color);
    border-radius: var(--bs-border-radius);
    overflow-x: auto; /* Allow horizontal scrolling like Bootstrap responsive tables */
    font-size: 13px; /* Match vulnerabilities table */
}

/* Multi-value cell styling - FR-001 single-line requirement */
.multi-value-cell-inline {
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

/* Status badge styling - matches vulnerability severity-badge pattern */
.status-badge {
    font-size: 0.8em;
    padding: 0.4em 0.8em;
    border-radius: 20px;
    font-weight: 600;
    white-space: nowrap;
    display: inline-block;
}

/* Status label styling - uppercase, color-coded text */
.status-label {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 700;
    font-size: 0.72rem;
}

.status-label strong {
    font-weight: 700;
}

.status-label.status-pending { color: #b45309; }
.status-label.status-staged { color: #4338ca; }
.status-label.status-open { color: #1d4ed8; }
.status-label.status-overdue { color: #b91c1c; }
.status-label.status-completed { color: #15803d; }
.status-label.status-failed { color: #be123c; }
.status-label.status-closed { color: #475569; }
.status-label.status-generic { color: var(--tblr-muted); }

[data-bs-theme="dark"] .status-label.status-pending { color: #facc15; }
[data-bs-theme="dark"] .status-label.status-staged { color: #c7d2fe; }
[data-bs-theme="dark"] .status-label.status-open { color: #93c5fd; }
[data-bs-theme="dark"] .status-label.status-overdue { color: #fca5a5; }
[data-bs-theme="dark"] .status-label.status-completed { color: #86efac; }
[data-bs-theme="dark"] .status-label.status-failed { color: #f9a8d4; }
[data-bs-theme="dark"] .status-label.status-closed { color: #cbd5f5; }
[data-bs-theme="dark"] .status-label.status-generic { color: rgb(226, 232, 240, 0.7); }

.ticket-status-cell {
    display: flex;
    align-items: center;
}

.ticket-grid-actions-wrapper {
    display: flex;
    justify-content: flex-end;
    width: 100%;
}

.ticket-actions-cell {
    display: flex;
    align-items: center;
    justify-content: flex-end;
}

.ticket-actions-cell .ticket-grid-actions {
    margin-left: auto;
}

.ticket-actions-header .ag-header-cell-comp-wrapper {
    justify-content: flex-end;
}

/* Theme is now handled entirely by JavaScript themeQuartz.withParams()
   matching the vulnerabilities table configuration exactly */


/* Clickable ticket numbers */
.ag-cell a {
    text-decoration: none;
    transition: color 0.15s ease-in-out;
}

.ag-cell a:hover {
    text-decoration: underline;
}

/* WCAG AAA Compliance - 7:1 contrast for links */
.ag-theme-quartz .ag-cell a {
    color: #0052cc; /* 7.3:1 on white */
}

.ag-theme-quartz-dark .ag-cell a {
    color: #4da6ff; /* 7.1:1 on dark */
}

/* Ensure proper contrast for danger text */
.ag-cell .text-danger {
    color: #dc3545 !important; /* Bootstrap danger color */
}

.ag-theme-quartz-dark .ag-cell .text-danger {
    color: #f56565 !important; /* Lighter red for dark mode */
}

/* Responsive adjustments */
@media (max-width: 768px) {
    #ticketsAgGrid {
        height: 500px; /* Slightly shorter on mobile */
    }

}

@media (max-width: 576px) {
    #ticketsAgGrid {
        height: 400px; /* Even shorter on small mobile */
    }
}

/* Accessibility improvements */
.multi-value-cell-inline:focus {
    outline: 2px solid var(--bs-primary);
    outline-offset: 2px;
    border-radius: 4px;
}

/* Keyboard navigation highlight */
.ag-cell-focus:not(.ag-cell-range-selected, .ag-cell-range-single-cell) {
    border: 2px solid var(--bs-primary) !important;
}

/* Row virtualization performance indicator */
.ag-row-position-absolute {
    transition: none; /* Disable transitions for virtualized rows */
}

/* Overdue row highlighting */
.ag-row.row-overdue {
    background-color: rgb(220, 53, 69, 0.1);
}

.ag-theme-quartz-dark .ag-row.row-overdue {
    background-color: rgb(245, 101, 101, 0.1);
}

/* Action buttons in grid */
.ag-cell .btn-group {
    display: inline-flex;
    gap: 0.25rem;
}

.ag-cell .btn-sm {
    padding: 0.125rem 0.375rem;
    font-size: 0.75rem;
}

/* Tooltip styling for multi-value fields */
.ag-tooltip {
    max-width: 300px;
    padding: 0.5rem;
    background-color: var(--bs-gray-900);
    color: var(--bs-white);
    border-radius: var(--bs-border-radius);
    font-size: 0.875rem;
    line-height: 1.5;
}

/* Terminal-style markdown viewer (preserved from original) */
.terminal-content {
    background-color: #0d1117 !important;
    color: #00ff00 !important;
    /* Use system fonts to match HexTrackr's design */
    font-family: inherit !important;
    font-size: 13px !important;
    line-height: 1.4 !important;
    border: 1px solid #30363d !important;
    border-radius: 6px !important;
    box-shadow: inset 0 0 10px rgb(0, 0, 0, 0.5) !important;
    padding: 16px !important;
    max-height: 500px !important;
    overflow-y: auto !important;
    white-space: pre-wrap !important;
}

/* Print styles */
@media print {
    #ticketsAgGrid {
        height: auto !important;
    }

    .ag-paging-panel {
        display: none;
    }
}
