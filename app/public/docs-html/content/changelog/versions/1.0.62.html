<!-- Fragment template for documentation content injected by docs-tabler.js -->
<section class="doc-fragment">
    <h1>Version 1.0.62</h1><p><strong>Release Date</strong>: October 11, 2025<br><strong>Type</strong>: Feature Release<br><strong>Linear Issue</strong>: HEX-203</p>
<hr>
<h2>üéØ Bidirectional Device-to-Ticket Navigation</h2><p>This release implements comprehensive bidirectional navigation between vulnerability device cards and their associated tickets, making it effortless to track which devices already have open tickets.</p>
<h3>‚ú® New Features</h3><h4>Smart Ticket Buttons on Device Cards</h4><ul>
<li><strong>Dynamic Button States</strong>: Vulnerability device cards now display intelligent buttons based on ticket status:<ul>
<li><strong>&quot;Create Ticket&quot;</strong> (green) - Device has no open tickets</li>
<li><strong>&quot;Open Ticket&quot;</strong> (status-colored) - Device has exactly 1 open ticket</li>
<li><strong>&quot;View Tickets (N)&quot;</strong> (status-colored) - Device has 2+ open tickets</li>
</ul>
</li>
<li><strong>Status-Aware Coloring</strong>: Button borders reflect ticket status (Pending=amber, Open=blue, Overdue=red, etc.)</li>
<li><strong>Job Type Text Coloring</strong>: Button text color matches job type (Upgrade=blue, Replace=orange, Refresh=purple, etc.)</li>
</ul>
<h4>Multi-Ticket Picker Modal</h4><ul>
<li><strong>Clean Selection UI</strong>: When a device has multiple open tickets, a modal displays all tickets with:<ul>
<li>XT ticket numbers</li>
<li>Job types with color coding</li>
<li>Status badges</li>
<li>Submission dates</li>
</ul>
</li>
<li><strong>Direct Navigation</strong>: Click any ticket to open the edit modal on tickets.html</li>
<li><strong>Create Anyway Option</strong>: Bottom button allows creating a new ticket even when tickets exist</li>
</ul>
<h4>Backend API Enhancement</h4><ul>
<li><strong>New Endpoint</strong>: <code>GET /api/tickets/by-device/:hostname</code></li>
<li><strong>Efficient Querying</strong>: Uses SQLite&#39;s <code>json_each()</code> for fast device matching within JSON arrays</li>
<li><strong>Case-Insensitive</strong>: Handles mixed-case hostnames and IP addresses</li>
<li><strong>Filtered Results</strong>: Excludes deleted tickets and Completed/Cancelled statuses</li>
</ul>
<h4>Seamless Navigation Flow</h4><ul>
<li><strong>URL Parameters</strong>: Uses <code>?openTicket=ID</code> for cross-page modal opening</li>
<li><strong>SessionStorage Pattern</strong>: Uses sessionStorage for ticket creation (cleaner than URL params)</li>
<li><strong>Auto-Open Modals</strong>: Tickets page detects URL parameter and automatically opens the edit modal</li>
<li><strong>Clean URLs</strong>: Parameter is removed after modal opens (no polluted browser history)</li>
</ul>
<h3>üé® UI/UX Improvements</h3><h4>Device Reorder Controls (Ticket Modal)</h4><ul>
<li><strong>Tabler Icons Integration</strong>: Added Tabler Icons webfont CDN for consistent icon usage</li>
<li><strong>Clear Visual Indicators</strong>: Up/down caret icons (‚ñ≤‚ñº) for device reordering</li>
<li><strong>Theme-Aware Styling</strong>: Icons and buttons adapt to light/dark modes using CSS custom properties</li>
<li><strong>Interactive Feedback</strong>:<ul>
<li>Hover: Blue highlight with subtle lift animation</li>
<li>Active: Press-down effect</li>
<li>Disabled: 30% opacity with not-allowed cursor on first/last items</li>
</ul>
</li>
<li><strong>Improved Click Handling</strong>: Using <code>Element.closest()</code> for reliable event delegation with nested icons</li>
</ul>
<h4>Back-to-Top Navigation Button</h4><ul>
<li><strong>Smart Visibility</strong>: Automatically appears on vulnerabilities.html when page is scrollable and user scrolls &gt; 300px</li>
<li><strong>Responsive Positioning</strong>: Fixed to bottom-right corner with circular design</li>
<li><strong>Smooth Transitions</strong>: Fade in/out with 0.3s animation</li>
<li><strong>Universal Coverage</strong>: Works across all view modes (table, device cards, vulnerability cards)</li>
<li><strong>Theme Integration</strong>: Uses CSS custom properties for consistent styling in light/dark modes</li>
</ul>
<h4>KEV Multi-Vulnerability Picker</h4><ul>
<li><strong>Smart Badge Display</strong>: KEV badges now show count when device has multiple KEVs (e.g., &quot;KEV (3)&quot;)</li>
<li><strong>Picker Modal Pattern</strong>: When 2+ KEVs exist, clicking badge opens selection modal with:<ul>
<li>CVE IDs with severity badges (color-coded by risk level)</li>
<li>VPR scores for each vulnerability</li>
<li>Truncated descriptions (100 characters)</li>
<li>Click-to-view individual KEV details</li>
</ul>
</li>
<li><strong>Single KEV Shortcut</strong>: When device has only 1 KEV, badge click opens details directly (no picker)</li>
<li><strong>Consistent Implementation</strong>: Same pattern used in both Device Security Overview modal and device cards</li>
<li><strong>Data Storage Pattern</strong>: Uses <code>window.kevModalData</code> with unique IDs for click handler access</li>
</ul>
<h4>Vulnerability Card Sort Enhancements</h4><ul>
<li><strong>Aligned Naming</strong>: Updated sort options to match device card semantics:<ul>
<li><strong>KEV Priority</strong>: KEV status (high‚Üílow) ‚Üí VPR score (high‚Üílow) ‚Üí Alphabetical</li>
<li><strong>VPR Priority</strong>: VPR score (high‚Üílow) ‚Üí Alphabetical</li>
<li><strong>Device Priority</strong>: # devices (high‚Üílow) ‚Üí VPR score (high‚Üílow) ‚Üí Alphabetical</li>
<li><strong>Vulnerability A-Z</strong>: Alphabetical by CVE (ascending)</li>
<li><strong>Vulnerability Z-A</strong>: Alphabetical by CVE (descending)</li>
</ul>
</li>
<li><strong>Multi-Level Sorting</strong>: All sort modes include tertiary alphabetical sorting for consistent tie-breaking</li>
<li><strong>Default Changed</strong>: KEV Priority now default sort mode (previously VPR Priority)</li>
</ul>
<h4>Edit Ticket Modal Improvements</h4><ul>
<li><strong>View Markdown Button</strong>: Added one-click button to Ticket Number (XT#) card for quick markdown preview access</li>
<li><strong>Smart Visibility</strong>: Button only appears when editing existing tickets (hidden for new ticket creation)</li>
<li><strong>Flexbox Positioning</strong>: Button positioned on right side of card using modern layout techniques</li>
<li><strong>Smooth Modal Transitions</strong>: 300ms delay between closing edit modal and opening view modal</li>
<li><strong>Visual Clarity</strong>: Eye icon with &quot;View Markdown&quot; label for intuitive understanding</li>
</ul>
<h3>üîß Technical Details</h3><h4>Files Modified</h4><ul>
<li><p><strong>Backend</strong>:</p>
<ul>
<li><code>app/routes/tickets.js</code> - New route definition</li>
<li><code>app/controllers/ticketController.js</code> - Request handling</li>
<li><code>app/services/ticketService.js</code> - Database query logic</li>
</ul>
</li>
<li><p><strong>Frontend</strong>:</p>
<ul>
<li><code>app/public/scripts/shared/vulnerability-cards.js</code> - Button state logic, modal implementation, KEV multi-badge handling, vulnerability sort logic updates</li>
<li><code>app/public/scripts/shared/device-security-modal.js</code> - Smart ticket button, power tools integration, KEV multi-badge handling</li>
<li><code>app/public/scripts/pages/tickets.js</code> - URL parameter handling, device reorder improvements, view markdown modal switching</li>
<li><code>app/public/vulnerabilities.html</code> - Multi-ticket picker modal HTML, device modal button placeholder, KEV picker modal HTML, back-to-top button HTML</li>
<li><code>app/public/tickets.html</code> - Tabler Icons CDN, device reorder template updates, view markdown button</li>
<li><code>app/public/styles/pages/tickets.css</code> - Device reorder button styling with hover states</li>
<li><code>app/public/styles/pages/vulnerabilities.css</code> - Back-to-top button styles</li>
</ul>
</li>
</ul>
<h4>Status Color Mapping</h4><p>Corrected to match actual ticket system values:</p>
<ul>
<li><strong>Pending</strong>: Amber yellow (#ffc107)</li>
<li><strong>Staged</strong>: Purple/Info (#17a2b8)</li>
<li><strong>Open</strong>: Blue (#0d6efd)</li>
<li><strong>Overdue</strong>: Red (#dc3545)</li>
<li><strong>Completed</strong>: Green (#28a745)</li>
<li><strong>Failed</strong>: Orange-red (#fd7e14)</li>
<li><strong>Closed</strong>: Gray (#6c757d)</li>
</ul>
<h4>Performance Optimizations</h4><ul>
<li><strong>Parallel API Calls</strong>: Uses <code>Promise.all()</code> to check ticket state for all visible devices concurrently</li>
<li><strong>No Extra Round-Trips</strong>: Passes full ticket objects instead of fetching individually</li>
<li><strong>Respects Pagination</strong>: Only checks ticket state for currently displayed device cards</li>
</ul>
<h4>Device Security Modal Enhancements</h4><ul>
<li><strong>Generate Report Removal</strong>: Removed non-functional HTML report generation (wasn&#39;t print-friendly or properly themed)</li>
<li><strong>Smart Ticket Button</strong>: Device security modal now has the same intelligent ticket button as device cards:<ul>
<li>Dynamically checks ticket state when modal opens</li>
<li>Shows &quot;Create Ticket&quot;, &quot;Open Ticket&quot;, or &quot;View Tickets (N)&quot; based on existing tickets</li>
<li>Status-aware coloring and job type text styling</li>
<li>Reuses existing ticketPickerModal structure for multi-ticket scenarios</li>
</ul>
</li>
<li><strong>Power Tools Integration</strong>: Device modal supports keyboard shortcuts for bulk ticket creation:<ul>
<li><strong>Shift+Cmd/Ctrl+Click</strong>: Create ticket for all KEV devices at location</li>
<li><strong>Shift+Alt+Click</strong>: Create ticket for all devices at location</li>
<li><strong>Single Click</strong>: Create ticket for one device</li>
</ul>
</li>
<li><strong>Consistent UX</strong>: Modal now provides identical ticket management experience as device cards</li>
</ul>
<h3>üêõ Bug Fixes</h3><ul>
<li>Fixed missing API endpoint issue by passing complete ticket objects from initial lookup</li>
<li>Fixed click handlers failing on nested icon elements using <code>Element.closest()</code></li>
<li>Fixed device reorder arrows not displaying due to missing Tabler Icons webfont</li>
<li>Fixed inconsistent status values between vulnerability cards and tickets system</li>
<li>Fixed device modal API response parsing (was treating wrapped response as raw array)</li>
<li>Fixed multi-ticket picker modal not appearing (now uses existing modal structure instead of dynamic creation)</li>
</ul>
<h3>üìù Related Issues</h3><ul>
<li><strong>HEX-203</strong>: Bidirectional Device-to-Ticket Navigation (Parent)</li>
<li><strong>HEX-174</strong>: Device Modal IP Display (Related work)</li>
<li><strong>HEX-190</strong>: Device Ticket Power Tool (Foundation)</li>
</ul>
<h3>üéì Development Notes</h3><p>This feature demonstrates several advanced patterns:</p>
<ul>
<li><strong>SQLite JSON Functions</strong>: Efficient searching within JSON array columns</li>
<li><strong>Event Delegation</strong>: Robust click handling for dynamically generated content</li>
<li><strong>SessionStorage Pattern</strong>: Cross-page data passing for ticket creation (cleaner than URL params)</li>
<li><strong>URL-based Navigation</strong>: Cross-page modal opening for existing tickets</li>
<li><strong>Theme-Aware Design</strong>: Consistent appearance across light/dark modes</li>
<li><strong>Parallel Data Fetching</strong>: Optimal performance with concurrent API calls</li>
<li><strong>Code Reuse</strong>: Device modal duplicates exact patterns from device cards for consistency</li>
</ul>
<hr>
<p><strong>Breaking Changes</strong>: None<br><strong>Migration Required</strong>: No<br><strong>Database Changes</strong>: No schema modifications</p>

    <!-- Note: This file is intentionally minimal. The full page scaffold, header, footer, and scripts
             are provided by docs-html/index.html. Content generated using this template will be
             fetched and injected into #content-container by docs-html/js/docs-portal-v2.js. -->
</section>
