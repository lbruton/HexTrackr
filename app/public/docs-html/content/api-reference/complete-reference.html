<!-- Fragment template for documentation content injected by docs-tabler.js -->
<section class="doc-fragment">
    <h1>Complete API Reference</h1>
<p>This document provides a high-level map of HexTrackr&#39;s REST surface area. Detailed per-domain docs are available here:</p>
<ul>
<li><a href="#tickets-api">Tickets API</a></li>
<li><a href="#vulnerabilities-api">Vulnerabilities API</a></li>
<li><a href="#websocket-api">WebSocket API</a></li>
<li><a href="#backup-api">Backup API</a></li>
</ul>
<p>Use this page to understand global behaviour (base URLs, security, health probes, and shared utilities).</p>
<hr>
<h2>API Overview</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Base URL</strong></td>
<td><code>http://localhost:8989</code></td>
</tr>
<tr>
<td><strong>Content-Type</strong></td>
<td><code>application/json</code> unless otherwise noted</td>
</tr>
<tr>
<td><strong>Rate Limiting</strong></td>
<td>100 requests per 15-minute window per IP (<code>express-rate-limit</code>)</td>
</tr>
<tr>
<td><strong>WebSocket</strong></td>
<td><code>ws://localhost:8989</code> (Socket.io)</td>
</tr>
<tr>
<td><strong>Database</strong></td>
<td>SQLite (<code>data/hextrackr.db</code>)</td>
</tr>
</tbody></table>
<hr>
<h2>Global Endpoints</h2>
<h3>GET /health</h3>
<p>Lightweight readiness probe.</p>
<pre><code class="language-http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/health</span> <span class="hljs-meta">HTTP/1.1</span>
<span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>localhost:8989</code></pre><pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ok&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.2.0&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;db&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;uptime&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8645.32</span>
<span class="hljs-punctuation">}</span></code></pre><h3>GET /api/docs/stats</h3>
<p>Returns documentation metadata used to build the static docs portal.</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;apiEndpoints&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">42</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;jsFunctions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">128</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;cssFiles&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">35</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;routes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;/api/tickets&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;/api/vulnerabilities&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;generatedAt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2025-08-20T15:05:04.123Z&quot;</span>
<span class="hljs-punctuation">}</span></code></pre><h3>GET /api/backup/all</h3>
<p>Exports the complete dataset (tickets + legacy vulnerabilities) for backup purposes. See <a href="#backup-api">Backup API</a> for payload details and download formats.</p>
<h3>DELETE /api/vulnerabilities/clear</h3>
<p>Clears rollover tables (<code>vulnerabilities_current</code>, <code>vulnerability_snapshots</code>, <code>vulnerability_daily_totals</code>, staging tables, and imports). Use with caution; the response is:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;success&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;All vulnerability data cleared from rollover architecture&quot;</span>
<span class="hljs-punctuation">}</span></code></pre><h3>DELETE /api/tickets/clear</h3>
<p>Removes all ticket rows. Used primarily in local development.</p>
<hr>
<h2>Import Summary</h2>
<p>HexTrackr exposes a consistent import workflow across domains:</p>
<table>
<thead>
<tr>
<th>Domain</th>
<th>JSON Endpoint</th>
<th>CSV Endpoint</th>
<th>Staging Endpoint</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Tickets</td>
<td><code>POST /api/import/tickets</code></td>
<td><code>POST /api/import</code> (type = <code>tickets</code>)</td>
<td>n/a</td>
<td>CSV is parsed client-side with PapaParse; modes <code>append</code>/<code>replace</code> map to migration behaviours.</td>
</tr>
<tr>
<td>Vulnerabilities</td>
<td><code>POST /api/import/vulnerabilities</code></td>
<td><code>POST /api/vulnerabilities/import</code></td>
<td><code>POST /api/vulnerabilities/import-staging</code></td>
<td>Staging endpoint streams WebSocket progress events.</td>
</tr>
</tbody></table>
<p>All importers normalise devices, split multi-CVE rows, and update lifecycle states. Refer to the specific API docs above for schema examples.</p>
<hr>
<h2>WebSocket Overview</h2>
<p>HexTrackr shares the HTTP server for Socket.io. See <a href="#websocket-api">WebSocket API</a> and <a href="#references/websocket-reference">WebSocket Reference</a> for payloads. Key points:</p>
<ul>
<li>Rooms follow the pattern <code>progress-{sessionId}</code>.</li>
<li>Events: <code>progress-status</code>, <code>progress-update</code>, <code>progress-complete</code>, <code>progress-error</code>.</li>
<li>Debug logging can be toggled with <code>localStorage.hextrackr_debug = &quot;true&quot;</code> on the client.</li>
</ul>
<hr>
<h2>Security Profile</h2>
<table>
<thead>
<tr>
<th>Concern</th>
<th>Implementation</th>
</tr>
</thead>
<tbody><tr>
<td>Rate limiting</td>
<td><code>express-rate-limit</code> (100 req / 15 min / IP)</td>
</tr>
<tr>
<td>Upload limits</td>
<td><code>multer</code> (100 MB)</td>
</tr>
<tr>
<td>Path traversal</td>
<td><code>PathValidator</code> guard wraps all file access</td>
</tr>
<tr>
<td>CORS</td>
<td><code>cors()</code> allowing <code>http://localhost:8080</code> and <code>http://127.0.0.1:8080</code> by default</td>
</tr>
<tr>
<td>Security headers</td>
<td><code>X-Content-Type-Options</code>, <code>X-Frame-Options</code>, <code>X-XSS-Protection</code></td>
</tr>
</tbody></table>
<p>Authentication is not implemented; deploy behind a trusted network or add a proxy/gateway as required.</p>
<hr>
<h2>Error Model</h2>
<p>Errors follow a simple structure:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;error&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;CSV parsing failed: Unexpected column count&quot;</span>
<span class="hljs-punctuation">}</span></code></pre><ul>
<li><code>400</code> for malformed requests or missing files</li>
<li><code>409</code> for mode conflicts (e.g., attempting to replace data without confirmation)</li>
<li><code>500</code> for internal server/database errors</li>
</ul>
<p>Consult individual API docs for domain-specific error semantics.</p>
<hr>
<h2>Related Documentation</h2>
<ul>
<li><a href="#architecture/backend">Architecture / Backend</a></li>
<li><a href="#architecture/database">Architecture / Database</a></li>
<li><a href="#technical-reference/modules-catalog">Technical Reference / Modules</a></li>
<li><a href="#security/overview">Security Overview</a></li>
</ul>

    <!-- Note: This file is intentionally minimal. The full page scaffold, header, footer, and scripts
             are provided by docs-html/index.html. Content generated using this template will be
             fetched and injected into #content-container by docs-html/js/docs-portal-v2.js. -->
</section>
