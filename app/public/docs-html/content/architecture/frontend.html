<!-- Fragment template for documentation content injected by docs-tabler.js -->
<section class="doc-fragment">
    <h1>Frontend Architecture</h1>
<p>The HexTrackr frontend employs a sophisticated <strong>modular orchestrator pattern</strong> that provides clean separation of concerns, event-driven communication, and maintainable code organization. The architecture has evolved from a monolithic structure to a fully modular system coordinated by the <code>VulnerabilityCoreOrchestrator</code>.</p>
<hr>
<h2>Architecture Overview</h2>
<div class="mermaid">graph TD
    A[ModernVulnManager] --&gt; B[VulnerabilityCoreOrchestrator]

    B --&gt; C[VulnerabilityDataManager]
    B --&gt; D[VulnerabilityStatisticsManager]
    B --&gt; E[VulnerabilityChartManager]
    B --&gt; F[VulnerabilitySearchManager]
    B --&gt; G[VulnerabilityGridManager]
    B --&gt; H[VulnerabilityCardsManager]

    B --&gt; I[WebSocketClient]
    B --&gt; J[ThemeController]
    B --&gt; K[ToastManager]

    C --&gt; L[API Endpoints]
    I --&gt; M[Socket.io Server]

    E --&gt; N[ApexCharts]
    G --&gt; O[AG-Grid]

    style B fill:#e1f5fe
    style A fill:#f3e5f5</div><hr>
<h2>Core Orchestrator Pattern</h2>
<h3>VulnerabilityCoreOrchestrator</h3>
<p>The central coordination hub that manages all specialized modules and their interactions:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VulnerabilityCoreOrchestrator</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">managers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventBus</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventTarget</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">initialized</span> = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">async</span> <span class="hljs-title function_">initializeAllModules</span>(<span class="hljs-params">parentManager</span>) {
        <span class="hljs-comment">// Create and wire all specialized managers</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VulnerabilityDataManager</span>(<span class="hljs-variable language_">this</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">statisticsManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VulnerabilityStatisticsManager</span>(<span class="hljs-variable language_">this</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">chartManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VulnerabilityChartManager</span>(<span class="hljs-variable language_">this</span>);
        <span class="hljs-comment">// ... other managers</span>
    }
}</code></pre><p><strong>Key Responsibilities</strong>:</p>
<ul>
<li>Module lifecycle management</li>
<li>Inter-module communication coordination</li>
<li>Event-driven architecture implementation</li>
<li>State synchronization across modules</li>
<li>Error handling and recovery</li>
</ul>
<hr>
<h2>Specialized Manager Modules</h2>
<h3>1. VulnerabilityDataManager</h3>
<p><strong>Location</strong>: <code>/scripts/shared/vulnerability-data.js</code></p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>API communication and data fetching</li>
<li>Data caching and invalidation</li>
<li>Response transformation and normalization</li>
<li>Error handling for network operations</li>
</ul>
<p><strong>Key Methods</strong>:</p>
<pre><code class="language-javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchVulnerabilities</span>(params)
<span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchStatistics</span>()
<span class="hljs-keyword">async</span> <span class="hljs-title function_">importCSV</span>(file, options)
<span class="hljs-title function_">clearCache</span>()</code></pre><h3>2. VulnerabilityStatisticsManager</h3>
<p><strong>Location</strong>: <code>/scripts/shared/vulnerability-statistics.js</code></p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Statistical calculations and aggregations</li>
<li>Trend analysis and metric computation</li>
<li>Performance optimization for large datasets</li>
<li>Real-time statistics updates</li>
</ul>
<p><strong>Key Features</strong>:</p>
<ul>
<li>Severity distribution calculations</li>
<li>Temporal trend analysis</li>
<li>Device impact metrics</li>
<li>Performance-optimized aggregations</li>
</ul>
<h3>3. VulnerabilityChartManager</h3>
<p><strong>Location</strong>: <code>/scripts/shared/vulnerability-chart-manager.js</code></p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>ApexCharts integration and management</li>
<li>Theme-aware chart configuration</li>
<li>Real-time chart updates</li>
<li>Chart lifecycle management</li>
</ul>
<p><strong>Chart Types</strong>:</p>
<ul>
<li>Severity distribution (donut charts)</li>
<li>Temporal trends (line charts)</li>
<li>Device impact analysis (bar charts)</li>
<li>VPR score distributions (histograms)</li>
</ul>
<p><strong>Theme Integration</strong>:</p>
<pre><code class="language-javascript"><span class="hljs-comment">// Sophisticated theme-aware initialization</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">initializeCharts</span>(<span class="hljs-params"></span>) {
    <span class="hljs-comment">// Approach 1: Immediate initialization</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">headerThemeManager</span>?.<span class="hljs-property">getThemeController</span>) {
        <span class="hljs-keyword">const</span> theme = <span class="hljs-variable language_">window</span>.<span class="hljs-property">headerThemeManager</span>.<span class="hljs-title function_">getThemeController</span>().<span class="hljs-title function_">getTheme</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createChartsWithTheme</span>(theme);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// Approach 2: Event-based initialization</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;themeInitialized&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createChartsWithTheme</span>(event.<span class="hljs-property">detail</span>.<span class="hljs-property">theme</span>);
    });

    <span class="hljs-comment">// Approach 3: Fallback with timeout</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createChartsWithTheme</span>(<span class="hljs-string">&#x27;light&#x27;</span>);
    }, <span class="hljs-number">500</span>);
}</code></pre><h3>4. VulnerabilitySearchManager</h3>
<p><strong>Location</strong>: <code>/scripts/shared/vulnerability-search.js</code></p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Search functionality implementation</li>
<li>Filter management and application</li>
<li>CVE lookup and validation</li>
<li>Search optimization and indexing</li>
</ul>
<h3>5. VulnerabilityGridManager</h3>
<p><strong>Location</strong>: <code>/scripts/shared/vulnerability-grid.js</code></p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>AG-Grid configuration and management</li>
<li>Column definitions and cell renderers</li>
<li>Pagination and virtual scrolling</li>
<li>Export functionality</li>
</ul>
<p><strong>AG-Grid Features</strong>:</p>
<ul>
<li>Virtual scrolling for performance</li>
<li>Custom cell renderers for CVE links</li>
<li>Responsive column management</li>
<li>Advanced filtering and sorting</li>
</ul>
<h3>6. VulnerabilityCardsManager</h3>
<p><strong>Location</strong>: <code>/scripts/shared/vulnerability-cards.js</code></p>
<p><strong>Responsibilities</strong>:</p>
<ul>
<li>Card-based view rendering</li>
<li>Pagination for card layouts</li>
<li>Device grouping and organization</li>
<li>Interactive card actions</li>
</ul>
<hr>
<h2>Real-time Communication</h2>
<h3>WebSocketClient Architecture</h3>
<p><strong>Location</strong>: <code>/scripts/shared/websocket-client.js</code></p>
<pre><code class="language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSocketClient</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isConnected</span> = <span class="hljs-literal">false</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">reconnectAttempts</span> = <span class="hljs-number">0</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxReconnectAttempts</span> = <span class="hljs-number">5</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">heartbeatInterval</span> = <span class="hljs-literal">null</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventCallbacks</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">progressThrottleTimers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    }
}</code></pre><p><strong>Key Features</strong>:</p>
<ul>
<li>Automatic reconnection with exponential backoff</li>
<li>Heartbeat monitoring for connection health</li>
<li>Progress event throttling (100ms minimum interval)</li>
<li>Event callback management</li>
<li>Connection timeout handling</li>
</ul>
<p><strong>Real-time Events</strong>:</p>
<ul>
<li>Import progress tracking</li>
<li>Data update notifications</li>
<li>System alerts and warnings</li>
<li>Connection status changes</li>
</ul>
<hr>
<h2>Theme System Integration</h2>
<h3>ThemeController Integration</h3>
<p><strong>Location</strong>: <code>/scripts/shared/theme-controller.js</code></p>
<p>The frontend integrates with a sophisticated theme system providing:</p>
<ul>
<li><strong>Dark/Light Mode</strong>: Complete theme switching</li>
<li><strong>WCAG Compliance</strong>: AA-level accessibility standards</li>
<li><strong>Cross-tab Synchronization</strong>: Theme state shared across browser tabs</li>
<li><strong>Component Awareness</strong>: All UI components respect theme settings</li>
</ul>
<p><strong>Chart Theme Adaptation</strong>:</p>
<pre><code class="language-javascript"><span class="hljs-comment">// Dynamic theme application for charts</span>
<span class="hljs-title function_">applyThemeToChart</span>(<span class="hljs-params">chartInstance, theme</span>) {
    <span class="hljs-keyword">const</span> themeConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getChartThemeConfig</span>(theme);
    chartInstance.<span class="hljs-title function_">updateOptions</span>({
        <span class="hljs-attr">theme</span>: {
            <span class="hljs-attr">mode</span>: theme,
            <span class="hljs-attr">palette</span>: themeConfig.<span class="hljs-property">palette</span>
        },
        <span class="hljs-attr">colors</span>: themeConfig.<span class="hljs-property">colors</span>,
        <span class="hljs-attr">stroke</span>: {
            ...chartOptions.<span class="hljs-property">stroke</span>,
            ...(themeConfig.<span class="hljs-property">stroke</span>?.<span class="hljs-property">colors</span> ? { <span class="hljs-attr">colors</span>: themeConfig.<span class="hljs-property">stroke</span>.<span class="hljs-property">colors</span> } : {})
        }
    });
}</code></pre><hr>
<h2>Modal System Architecture</h2>
<h3>Modal Management</h3>
<p><strong>Location</strong>: <code>/scripts/shared/</code> (various modal files)</p>
<p><strong>Available Modals</strong>:</p>
<ul>
<li><code>vulnerability-details-modal.js</code> - Vulnerability information display</li>
<li><code>device-security-modal.js</code> - Device-specific security details</li>
<li><code>settings-modal.js</code> - Application configuration</li>
<li><code>progress-modal.js</code> - Import progress tracking</li>
</ul>
<p><strong>Modal Features</strong>:</p>
<ul>
<li>Bootstrap 5 integration</li>
<li>Proper modal lifecycle management</li>
<li>State preservation during navigation</li>
<li>Accessibility compliance</li>
</ul>
<h3>Universal Aggregation System</h3>
<p>HexTrackr implements description-field-based aggregation for consistent modal relationships:</p>
<p><strong>Vulnerability Modals</strong>: Aggregate all devices affected by specific vulnerabilities<br><strong>Device Modals</strong>: Aggregate all vulnerabilities affecting specific devices</p>
<hr>
<h2>Page-Specific Architecture</h2>
<h3>Vulnerabilities Page (<code>vulnerabilities.html</code>)</h3>
<p><strong>Main Controller</strong>: <code>/scripts/pages/vulnerabilities.js</code></p>
<pre><code class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModernVulnManager</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeModules</span>();
    }

    <span class="hljs-keyword">async</span> <span class="hljs-title function_">initializeModules</span>(<span class="hljs-params"></span>) {
        <span class="hljs-comment">// Delegate to orchestrator</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">coreOrchestrator</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VulnerabilityCoreOrchestrator</span>();
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">coreOrchestrator</span>.<span class="hljs-title function_">initializeAllModules</span>(<span class="hljs-variable language_">this</span>);

        <span class="hljs-comment">// Get module references for delegation</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataManager</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">coreOrchestrator</span>.<span class="hljs-property">dataManager</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">statisticsManager</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">coreOrchestrator</span>.<span class="hljs-property">statisticsManager</span>;
        <span class="hljs-comment">// ... other managers</span>
    }
}</code></pre><p><strong>Page Features</strong>:</p>
<ul>
<li>Real-time vulnerability dashboard</li>
<li>Interactive severity and temporal charts</li>
<li>Dynamic AG-Grid with virtual scrolling</li>
<li>CSV import with progress tracking</li>
<li>Multiple export formats (CSV, HTML, PDF)</li>
<li>Advanced search and filtering</li>
</ul>
<h3>Tickets Page (<code>tickets.html</code>)</h3>
<p><strong>Main Controller</strong>: <code>/scripts/pages/tickets.js</code></p>
<p><strong>Features</strong>:</p>
<ul>
<li>Complete CRUD operations for tickets</li>
<li>Device assignment and tracking</li>
<li>ServiceNow/Hexagon integration</li>
<li>Bulk operations and reporting</li>
<li>Audit trail management</li>
</ul>
<hr>
<h2>Shared Infrastructure</h2>
<h3>Utility Modules</h3>
<p><strong>Location</strong>: <code>/scripts/utils/</code></p>
<ul>
<li><code>accessibility-announcer.js</code> - Screen reader support</li>
<li><code>security.js</code> - XSS prevention and input sanitization</li>
<li><code>theme-contrast-tester.js</code> - WCAG compliance validation</li>
<li><code>wcag-contrast-validator.js</code> - Color contrast validation</li>
</ul>
<h3>Shared Components</h3>
<p><strong>Location</strong>: <code>/scripts/shared/</code></p>
<ul>
<li><code>header-loader.js</code> - Dynamic header management</li>
<li><code>footer-loader.js</code> - Footer content loading</li>
<li><code>toast-manager.js</code> - Notification system</li>
<li><code>config-loader.js</code> - Configuration management</li>
<li><code>cve-utilities.js</code> - CVE validation and formatting</li>
</ul>
<hr>
<h2>Event-Driven Communication</h2>
<h3>Event Flow Architecture</h3>
<div class="mermaid">sequenceDiagram
    participant User
    participant Grid as GridManager
    participant Orch as Orchestrator
    participant Data as DataManager
    participant Chart as ChartManager

    User-&gt;&gt;Grid: Filter Change
    Grid-&gt;&gt;Orch: filterChanged event
    Orch-&gt;&gt;Data: fetchVulnerabilities(filters)
    Data-&gt;&gt;Orch: dataUpdated event
    Orch-&gt;&gt;Chart: updateCharts(newData)
    Orch-&gt;&gt;Grid: updateGrid(newData)</div><p><strong>Event Types</strong>:</p>
<ul>
<li><code>dataUpdated</code> - New data available</li>
<li><code>filterChanged</code> - Search/filter modifications</li>
<li><code>themeChanged</code> - Theme switch events</li>
<li><code>importProgress</code> - CSV import updates</li>
<li><code>exportComplete</code> - Export operation finished</li>
</ul>
<hr>
<h2>Performance Optimizations</h2>
<h3>Data Management</h3>
<ul>
<li><strong>Caching Strategy</strong>: Intelligent cache invalidation</li>
<li><strong>Virtual Scrolling</strong>: AG-Grid virtualization for large datasets</li>
<li><strong>Lazy Loading</strong>: Progressive data loading</li>
<li><strong>Debounced Operations</strong>: Search and filter debouncing</li>
</ul>
<h3>Rendering Optimizations</h3>
<ul>
<li><strong>Chart Throttling</strong>: Progress update throttling (100ms)</li>
<li><strong>DOM Optimization</strong>: Minimal DOM manipulation</li>
<li><strong>Event Delegation</strong>: Efficient event handling</li>
<li><strong>Memory Management</strong>: Proper cleanup and disposal</li>
</ul>
<h3>Network Optimization</h3>
<ul>
<li><strong>Request Batching</strong>: Combined API requests</li>
<li><strong>Response Compression</strong>: Gzip/deflate support</li>
<li><strong>Connection Pooling</strong>: WebSocket connection reuse</li>
<li><strong>Progressive Enhancement</strong>: Graceful degradation</li>
</ul>
<hr>
<h2>Error Handling &amp; Recovery</h2>
<h3>Graceful Degradation</h3>
<pre><code class="language-javascript"><span class="hljs-comment">// Example error handling in orchestrator</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">handleModuleError</span>(<span class="hljs-params">moduleName, error</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Module <span class="hljs-subst">${moduleName}</span> error:`</span>, error);

    <span class="hljs-comment">// Attempt recovery</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">canRecover</span>(moduleName, error)) {
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recoverModule</span>(moduleName);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// Fallback to basic functionality</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">enableFallbackMode</span>(moduleName);
    }

    <span class="hljs-comment">// Notify user if necessary</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showErrorToast</span>(moduleName, error);
}</code></pre><p><strong>Error Recovery Features</strong>:</p>
<ul>
<li>Module-level error isolation</li>
<li>Automatic recovery attempts</li>
<li>Fallback functionality modes</li>
<li>User notification system</li>
<li>Error logging and reporting</li>
</ul>
<hr>
<h2>Development &amp; Testing</h2>
<h3>Module Testing Strategy</h3>
<ul>
<li><strong>Unit Tests</strong>: Individual manager testing</li>
<li><strong>Integration Tests</strong>: Orchestrator communication testing</li>
<li><strong>E2E Tests</strong>: Playwright automation for workflows</li>
<li><strong>Performance Tests</strong>: Load testing with large datasets</li>
</ul>
<h3>Development Tools</h3>
<ul>
<li><strong>ES6 Modules</strong>: Native module system</li>
<li><strong>Hot Reloading</strong>: Development server support</li>
<li><strong>Source Maps</strong>: Debugging support</li>
<li><strong>Code Splitting</strong>: Optimized loading</li>
</ul>
<hr>
<h2>Future Enhancements</h2>
<h3>Planned Improvements</h3>
<table>
<thead>
<tr>
<th>Area</th>
<th>Enhancement</th>
<th>Priority</th>
</tr>
</thead>
<tbody><tr>
<td><strong>State Management</strong></td>
<td>Implement Redux-like state management</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Component System</strong></td>
<td>Web Components migration</td>
<td>Low</td>
</tr>
<tr>
<td><strong>PWA Features</strong></td>
<td>Service worker and offline support</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Micro-frontends</strong></td>
<td>Module federation implementation</td>
<td>Low</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>Further bundle optimization</td>
<td>High</td>
</tr>
<tr>
<td><strong>Testing</strong></td>
<td>Increased test coverage to 90%+</td>
<td>High</td>
</tr>
</tbody></table>
<h3>Architecture Evolution</h3>
<ul>
<li><strong>TypeScript Migration</strong>: Gradual TypeScript adoption</li>
<li><strong>Framework Integration</strong>: Consider React/Vue integration</li>
<li><strong>API Standardization</strong>: GraphQL implementation</li>
<li><strong>Real-time Enhancements</strong>: Enhanced WebSocket features</li>
</ul>
<hr>
<h2>Summary</h2>
<p>The HexTrackr frontend demonstrates a mature, modular architecture that prioritizes:</p>
<ul>
<li><strong>Separation of Concerns</strong>: Each module has distinct responsibilities</li>
<li><strong>Event-Driven Communication</strong>: Loose coupling between components</li>
<li><strong>Performance</strong>: Optimized for large datasets and real-time updates</li>
<li><strong>Maintainability</strong>: Clean, testable, and extensible code structure</li>
<li><strong>Accessibility</strong>: WCAG AA compliance throughout</li>
<li><strong>Theme Integration</strong>: Comprehensive dark/light mode support</li>
</ul>
<p>This architecture provides a solid foundation for future enhancements while maintaining excellent performance and user experience.</p>

    <!-- Note: This file is intentionally minimal. The full page scaffold, header, footer, and scripts
             are provided by docs-html/index.html. Content generated using this template will be
             fetched and injected into #content-container by docs-html/js/docs-portal-v2.js. -->
</section>
