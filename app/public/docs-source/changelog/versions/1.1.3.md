---
title: "Version 1.1.3 - Dependency Cleanup: Chart.js and Stagehand Removal"
date: "2025-10-23"
version: "1.1.3"
status: "Released"
category: "Maintenance"
---

# Version 1.1.3 - Dependency Cleanup: Chart.js and Stagehand Removal

**Release Status**: ✅ Released
**Release Date**: 2025-10-23
**Parent Issues**: [HEX-333](https://linear.app/hextrackr/issue/HEX-333/tech-debt-remove-unused-chartjs-dependency-from-packagejson), [DOCS-79](https://linear.app/hextrackr/issue/DOCS-79/docs-content-fix-outdated-chartjs-reference-in-vulnerabilitieshtml)

## Overview

HexTrackr v1.1.3 removes two unused dependencies (Chart.js and Stagehand) that were creating technical debt and dependency conflicts. This cleanup eliminates ~300KB of unused packages, resolves peer dependency issues with dotenv, and removes misleading documentation that incorrectly referenced Chart.js instead of the actually-used ApexCharts library.

## Dependency Cleanup

### Removed: Chart.js Production Dependency (HEX-333)

**Priority**: Low (Technical Debt)
**Impact**: Eliminated dependency bloat, fixed misleading documentation, removed false security alerts

**Problem**: Chart.js listed as production dependency but completely unused
- `package.json:33` listed `"chart.js": "^4.4.0"` as dependency
- HexTrackr uses **ApexCharts** for all chart rendering (loaded from `/vendor/apexcharts/`)
- Chart.js never instantiated anywhere in codebase
- Added ~270KB to node_modules unnecessarily
- Created false security alerts from vulnerability scanners
- Misleading documentation suggested Chart.js was used

**Solution**: Complete removal of Chart.js and all references
- Removed `chart.js` from package.json dependencies
- Removed Chart.js ESLint global declarations from `globals.js`
- Removed misleading HTML comments from `vulnerabilities.html`
- Updated `technology-stack.html` documentation
- Verified all chart functionality continues to work via ApexCharts

**Files Modified**:
- `package.json:33` - Removed chart.js dependency
- `app/public/scripts/globals.js:66` - Removed from LIBRARY_GLOBALS array
- `app/public/scripts/globals.js:96` - Removed from JSDoc comments
- `app/public/scripts/globals.js:111` - Removed from ESLint global declarations
- `app/public/vulnerabilities.html:73-74` - Removed misleading comments
- `app/public/docs-html/content/architecture/technology-stack.html:144` - Removed from docs
- `package-lock.json` - Cleaned 13 Chart.js-related packages

**Validation**:
- ✅ Chart.js successfully removed from node_modules
- ✅ ApexCharts continues to render vulnerability trend charts correctly
- ✅ No console errors after removal
- ✅ Docker container restarted successfully (https://dev.hextrackr.com)
- ✅ Vulnerabilities page returns HTTP 200
- ✅ All chart functionality verified working (render, theme switching, zoom/pan)

---

### Removed: Stagehand Development Dependency

**Priority**: Low (Technical Debt)
**Impact**: Fixed peer dependency conflict with dotenv, eliminated unused browser automation tool

**Problem**: Stagehand listed as devDependency but never used
- `package.json:55` listed `"@browserbasehq/stagehand": "^1.12.1"` as devDependency
- Created peer dependency conflict: Stagehand requires `dotenv@^16.4.5`, HexTrackr uses `dotenv@^17.2.1`
- Forced use of `--legacy-peer-deps` flag during npm install
- Referenced non-existent test file: `tests/stagehand-examples.js`
- No Stagehand usage found anywhere in codebase

**Solution**: Complete removal of Stagehand and related scripts
- Removed `@browserbasehq/stagehand` from package.json devDependencies
- Removed `test:stagehand` script from package.json (referenced non-existent file)
- Verified no Stagehand imports or usage in codebase

**Files Modified**:
- `package.json:55` - Removed @browserbasehq/stagehand devDependency
- `package.json:25` - Removed test:stagehand script
- `package-lock.json` - Cleaned 23 Stagehand-related packages

**Validation**:
- ✅ Stagehand successfully removed from dependency tree
- ✅ `npm install` now runs cleanly without `--legacy-peer-deps` flag
- ✅ dotenv peer dependency conflict resolved
- ✅ All existing npm scripts continue to work

---

## Documentation Fixes (DOCS-79)

**Priority**: High (Documentation Accuracy)
**Impact**: Eliminated developer confusion about charting library architecture

**Problem**: HTML comments incorrectly referenced Chart.js
- `vulnerabilities.html:73-74` had comments saying "Chart.js for mini-charts"
- Created confusion about which charting library is actually used
- Could mislead future developers during debugging or refactoring
- Documentation-code mismatch violated principle of accurate technical docs

**Solution**: Removed misleading comments, updated documentation
- Removed Chart.js comments from vulnerabilities.html
- Updated technology-stack.html to reflect ApexCharts-only architecture
- Aligned documentation with actual implementation (ApexCharts from /vendor/)

**Validation**:
- ✅ No Chart.js references remain in HTML or documentation
- ✅ ApexCharts correctly documented as sole charting library
- ✅ Documentation portal updated with accurate technology stack

---

## Impact Summary

### Dependency Cleanup Results

**Packages Removed**: 36 total packages (Chart.js: 13, Stagehand: 23)
**Bundle Size Reduction**: ~300KB+ removed from node_modules
**Peer Conflicts Resolved**: dotenv version mismatch eliminated
**Build Process Improvement**: npm install now runs cleanly without flags

### Before vs After

| Metric | Before | After | Improvement |
|--------|--------|-------|-------------|
| **Dependencies** | 23 | 22 | -1 |
| **DevDependencies** | 8 | 7 | -1 |
| **Total Packages** | 627 | 591 | -36 |
| **npm install** | Requires `--legacy-peer-deps` | Works cleanly | ✅ Fixed |
| **Peer Conflicts** | 1 (dotenv) | 0 | ✅ Resolved |
| **False Security Alerts** | Chart.js CVEs flagged | None | ✅ Eliminated |

---

## Related Issues

- Tech Debt: [HEX-333](https://linear.app/hextrackr/issue/HEX-333/tech-debt-remove-unused-chartjs-dependency-from-packagejson) - Remove unused Chart.js dependency
- Documentation: [DOCS-79](https://linear.app/hextrackr/issue/DOCS-79/docs-content-fix-outdated-chartjs-reference-in-vulnerabilitieshtml) - Fix Chart.js reference in vulnerabilities.html

---

## Notes

### Why This Matters

**Technical Debt Reduction**: Unused dependencies create maintenance burden (security updates, compatibility conflicts) without providing value. Removing them improves codebase health.

**Security Posture**: Vulnerability scanners flag CVEs in all dependencies, even unused ones. Chart.js CVEs would trigger false alerts, wasting security team time investigating non-issues.

**Developer Experience**: Misleading documentation and unused dependencies confuse new developers during onboarding. Clear, accurate codebase documentation reduces ramp-up time and prevents architectural misunderstandings.

**Build Reliability**: Peer dependency conflicts force workarounds like `--legacy-peer-deps`, which can mask real compatibility issues. Clean dependency resolution ensures reliable builds.

### Testing Performed

- ✅ Full Docker container restart verified
- ✅ Vulnerabilities page chart rendering tested (https://dev.hextrackr.com/vulnerabilities.html)
- ✅ Chart theme switching verified (light/dark mode)
- ✅ Chart interactions tested (zoom, pan, export)
- ✅ npm install runs cleanly without flags
- ✅ ESLint validation passes (no undefined global errors)
- ✅ Pre-commit hooks passed successfully

---

*Changelog completed on 2025-10-23 by Claude Code*
