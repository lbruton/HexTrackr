# Archived: Over-Engineered Vulnerability Color Tests

**Date Archived**: September 17, 2025
**Original Spec**: 002-vulnerability-card-icon
**Reason**: Excessive complexity for a simple CSS color change

## What These Tests Were

These tests were created to verify that vulnerability severity colors were consistent across stat cards and charts in the HexTrackr application. The change involved updating CSS variables to ensure:

- Critical: Red (#dc2626)
- High: Orange (#d97706)
- Medium: Blue (#2563eb) - changed from yellow
- Low: Green (#16a34a)

## Why They Were Over-Engineered

### The Numbers
- **4 test files** for a CSS change
- **800+ lines of code** to verify colors
- **100+ requests** triggering rate limiting
- **2+ hours** of development time

### The Problems

1. **Programmatic Color Verification**: Attempted to parse and verify RGB values programmatically
   ```javascript
   const rgb = parseRGB(computedColor);
   expect(rgb).toMatchObject({ r: 220, g: 38, b: 38 });
   ```

2. **Excessive Test Coverage**: Created separate tests for:
   - Each severity level (4)
   - Each theme (2)
   - Each display location (cards + charts)
   - Total: 16+ test scenarios for 4 CSS variables

3. **Complex Helper Functions**: Built RGB parsing, color comparison, and theme detection utilities

4. **Rate Limiting Issues**: Tests made so many requests they triggered HexTrackr's own security (100 requests/15 min)

## What We Should Have Done

A simple 59-line visual test that:
1. Takes a screenshot in light mode
2. Takes a screenshot in dark mode
3. Lets human eyes verify the colors match

See: `tests/e2e/vulnerability-visual-check.spec.js`

## Lessons Learned

1. **Visual changes need visual tests** - Screenshots are perfect for CSS
2. **Test complexity should match change risk** - CSS colors are low risk
3. **Human verification is valid** - Not everything needs automation
4. **Simple is sustainable** - 59 lines are easier to maintain than 800

## Files in This Archive

- `vulnerability-colors-critical.spec.js` - Tests for critical severity color
- `vulnerability-colors-high.spec.js` - Tests for high severity color
- `vulnerability-colors-medium.spec.js` - Tests for medium severity color
- `vulnerability-colors-low.spec.js` - Tests for low severity color

## Why We Keep Them

These files serve as a cautionary tale and learning resource:
- Example of what NOT to do for visual testing
- Reference for complex Playwright patterns (if ever truly needed)
- Reminder that more code isn't always better code

## The Better Way

```javascript
// Simple visual test - all we needed
await page.screenshot({
    path: "test-results/colors-light.png",
    fullPage: false,
    clip: { x: 0, y: 200, width: 1200, height: 800 }
});
```

**Remember**: The best test is the simplest one that provides confidence in the change.